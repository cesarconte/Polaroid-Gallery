import{v as z,N as A,f as m,O as X,q as Y,P as V,Q as Z,g as B,w as n,R as f,S as w,T as j,U as G,V as H,W as J,r as c,o as g,b as o,d as y,c as k,t as K,a as C,X as x,Y as ee,Z as te,F as ae,h as se,$ as oe}from"./index-CBL1Pzhd.js";const le=C("h2",{class:"pb-4"},"Explore Polaroids",-1),ne=C("br",null,null,-1),ce={key:0,class:"mb-10"},re={key:1,class:"mb-10"},ie=C("br",null,null,-1),de=C("br",null,null,-1),pe={__name:"ExploreView",setup(ue){const p=z(),{isLoggedIn:F}=A(),N=m([]),L=m([]),v=m([]),_=m([]),h=m(""),S=m([]),U=m([]),T=async()=>{await D(),await E(),await M(),await O()},D=async()=>{const s=f(p,"tags"),e=await w(s);N.value=e.docs.map(t=>({id:t.id,name:t.data().name}))},E=async()=>{const s=f(p,"users"),e=await w(s);L.value=e.docs.map(t=>({id:t.id,...t.data()}))},M=async()=>{R();const s=f(p,"cards"),e=j(s,H("randomOrder"),G(6)),t=await w(e);U.value=t.docs.map(l=>({id:l.id,...l.data()}))},O=async()=>{const s=f(p,"cards"),e=await w(s);S.value=e.docs.map(t=>({id:t.id,...t.data()}))},R=async()=>{const s=f(p,"cards"),e=await w(s),t=J(p);e.docs.forEach(l=>{const r=Math.random(),i=l.ref;t.update(i,{randomOrder:r})}),await t.commit()};X(T);const b=Y(()=>!v.value.length&&!_.value.length&&!h.value?U.value:S.value.filter(s=>{var r;const e=!v.value.length||v.value.some(i=>{var d;return((d=s.tag)==null?void 0:d.toLowerCase())===i.toLowerCase()}),t=!_.value.length||_.value.some(i=>{var d;return((d=s.userFullName)==null?void 0:d.toLowerCase())===i.toLowerCase()}),l=!h.value||((r=s.title)==null?void 0:r.toLowerCase().includes(h.value.toLowerCase()));return e&&t&&l}));V(v,b),V(_,b),V(h,b);const{xs:P,sm:W,md:q}=Z();return(s,e)=>{const t=c("v-chip"),l=c("v-list-item"),r=c("v-autocomplete"),i=c("v-text-field"),d=c("v-col"),I=c("v-row"),Q=c("v-container"),$=c("v-responsive");return g(),B($,null,{default:n(()=>[o(Q,{fluid:""},{default:n(()=>[le,ne,y(F)?(g(),k("p",ce," We hope you find what are you looking for, "+K(y(se).fullName)+". ",1)):(g(),k("p",re," We hope you find what are you looking for. ")),C("div",{class:ee(["d-block mx-auto",y(P)?"w-100":y(W)||y(q)?"w-75":"w-50"])},[o(r,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),items:N.value,"item-title":"name","item-text":"name",label:"Filter by Tag",clearable:"",chips:"","closable-chips":"",multiple:"","hide-details":"","prepend-inner-icon":"mdi-tag-search-outline",variant:"outlined",rounded:"","auto-select-first":""},{chip:n(({props:a,item:u})=>[o(t,x(a,{text:u.raw.name}),null,16,["text"])]),item:n(({props:a,item:u})=>[o(l,x(a,{title:u.raw.name}),null,16,["title"])]),_:1},8,["modelValue","items"]),ie,o(r,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),items:L.value,"item-title":"fullName","item-text":"fullName",label:"Filter by User",chips:"","closable-chips":"",multiple:"","hide-details":"","prepend-inner-icon":"mdi-account-search-outline",variant:"outlined",rounded:"","auto-select-first":""},{chip:n(({props:a,item:u})=>[o(t,x(a,{text:u.raw.fullName}),null,16,["text"])]),item:n(({props:a,item:u})=>[o(l,x(a,{title:u.raw.fullName}),null,16,["title"])]),_:1},8,["modelValue","items"]),de,o(i,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=a=>h.value=a),label:"Search by Title","hide-details":"","prepend-inner-icon":"mdi-text-search",variant:"outlined",rounded:""},null,8,["modelValue"])],2),o(I,{class:"my-4"},{default:n(()=>[(g(!0),k(ae,null,te(b.value,a=>(g(),B(d,{cols:"12",sm:"9 mx-auto",md:"6",lg:"4",key:a.id},{default:n(()=>[o(oe,{card:a},null,8,["card"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}};export{pe as default};
